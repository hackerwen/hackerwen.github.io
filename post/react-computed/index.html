<html>
  <head>
  <meta
    name="viewport"
    content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=no"
  />
  <meta charset="utf-8" />
  <meta name="referrer" content="never" />
  <title>ä¼˜é›…å¤„ç†è¡¨å•è”åŠ¨ | æµ·ç§‹</title>
  <link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.11.1/katex.min.css" />
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://worldzhao.github.io/styles/main.css" />
  <script src="https://worldzhao.github.io/media/scripts/mdui.min.js"></script>
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css" />
  <link
    href="https://fonts.googleapis.com/css?family=Dancing+Script|Ma+Shan+Zheng&display=swap"
    rel="stylesheet"
  />
  <script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
  <script src="https://worldzhao.github.io/media/scripts/script.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>

  
</head>

    <body class="mdui-theme-primary-purple mdui-theme-accent-purple">
        <header class="index-img mdui-m-b-3"  style="background-image: url(http://ww2.sinaimg.cn/large/006tNc79gy1g5uhe3gi3qj30u00u04qp.jpg);" >
                          <button class="mdui-btn  mdui-btn-icon mdui-btn-dense mdui-color-theme-500 mdui-ripple yinying mdui-m-t-1 mdui-m-l-1" mdui-menu="{target: '#demo-attr-cascade'}"><i class="mdui-icon material-icons">&#xe5d2;</i></button>
                <ul class="mdui-menu" id="demo-attr-cascade">
                
                        <li class="mdui-menu-item">
                          <a href="/" class="mdui-ripple">é¦–é¡µ</a>
                        </li>
                
                        <li class="mdui-menu-item">
                          <a href="/archives" class="mdui-ripple">å½’æ¡£</a>
                        </li>
                
                        <li class="mdui-menu-item">
                          <a href="/tags" class="mdui-ripple">æ ‡ç­¾</a>
                        </li>
                
                        <li class="mdui-menu-item">
                          <a href="/post/about" class="mdui-ripple">å…³äº</a>
                        </li>
                
                      </ul>

        </header>
        <div class="mdui-container post">
                <div class="mdui-row">
                        <div class="mdui-col-md-8 mdui-col-offset-md-2 ">
                         <article class="mdui-shadow-10 mdui-p-a-2 post-list">
                           <div class="mdui-typo-display-1 mdui-m-b-3">ä¼˜é›…å¤„ç†è¡¨å•è”åŠ¨</div>
                           <a  class="index-list-biaoqian ">2019-03-17</a>
                           <div class="mdui-typo mdui-m-t-3 post-neirong"><h1 id="ä¼˜é›…å¤„ç†è¡¨å•è”åŠ¨">ä¼˜é›…å¤„ç†è¡¨å•è”åŠ¨</h1>
<h2 id="å¼•è¨€">å¼•è¨€</h2>
<p>è¡¨å•ä¹‹é—´è”åŠ¨ä¸€ç›´æ˜¯åå°ç®¡ç†ç±»é¡¹ç›®ä¸­çš„é«˜é¢‘åœºæ™¯ï¼Œç®€å•æè¿°ä¸ºï¼šä¸€ä¸ªï¼ˆæºï¼‰è¡¨å•åŸŸçš„å˜åŒ–ä¼šå¯¼è‡´å¦å¤–ä¸€ä¸ªï¼ˆç›®æ ‡ï¼‰è¡¨å•åŸŸçš„å˜åŒ–ã€‚</p>
<p>æœ¬æ–‡åŸºäº antdï¼Œç»“åˆ get å…³é”®å­—ï¼Œæå‡ºäº†ä¸€ç§è¾ƒä¸ºä¼˜é›…åœ°è§£å†³è¡¨å•è”åŠ¨çš„æ‰‹æ®µã€‚</p>
<h2 id="ä¼ªè®¡ç®—å±æ€§">ï¼ˆä¼ªï¼‰è®¡ç®—å±æ€§</h2>
<p>åˆæ¬¡è§åˆ°è®¡ç®—å±æ€§ä¸€è¯æ˜¯åœ¨ Vue å®˜æ–¹æ–‡æ¡£-<a href="https://cn.vuejs.org/v2/guide/computed.html">è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨</a>ä¸€èŠ‚ä¸­ã€‚</p>
<blockquote>
<p>æ¨¡æ¿å†…çš„è¡¨è¾¾å¼éå¸¸ä¾¿åˆ©ï¼Œä½†æ˜¯è®¾è®¡å®ƒä»¬çš„åˆè¡·æ˜¯ç”¨äºç®€å•è¿ç®—çš„ã€‚åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ä¼šè®©æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚</p>
</blockquote>
<p>å›æƒ³æˆ‘ä»¬ç¼–å†™çš„ React ä»£ç ï¼Œæ˜¯å¦ä¹Ÿåœ¨ jsxï¼ˆrender å‡½æ•°ï¼‰ä¸­æ”¾å…¥äº†å¤ªå¤šçš„é€»è¾‘å¯¼è‡´ jsxï¼ˆrender å‡½æ•°ï¼‰è¿‡äºæ²‰é‡ï¼Ÿ</p>
<p>é€šè¿‡<code>get</code>å…³é”®å­—ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ ·æ•ˆæœã€‚</p>
<p>æœ¬ä¾‹æ¥æºï¼š<a href="https://github.com/shimohq/react-cookbook#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">react-cookbook</a>-çŸ³å¢¨æ–‡æ¡£</p>
<pre><code class="language-jsx">// ä½¿ç”¨ getters å°è£… render æ‰€éœ€è¦çš„çŠ¶æ€æˆ–æ¡ä»¶çš„ç»„åˆ
// å¯¹äºè¿”å› boolean çš„ getter ä½¿ç”¨ is- å‰ç¼€å‘½å

// bad
render () {
    return (
        &lt;div&gt;
        {
            this.state.age &gt; 18
            &amp;&amp; (this.props.school === 'A'
                || this.props.school === 'B')
            ? &lt;VipComponent /&gt;
            : &lt;NormalComponent /&gt;
        }
        &lt;/div&gt;
    )
}

// good
get isVIP() {
    return
        this.state.age &gt; 18
        &amp;&amp; (this.props.school === 'A'
            || this.props.school === 'B')
    }
render() {
    return (
        &lt;div&gt;
        {this.isVIP ? &lt;VipComponent /&gt; : &lt;NormalComponent /&gt;}
        &lt;/div&gt;
    )
}
</code></pre>
<p>å¯ä»¥ç®€å•ç†è§£ä¸ºï¼šé€šè¿‡<code>get</code>å…³é”®å­—ï¼ŒæŠ½ç¦»è®¡ç®—é€»è¾‘ï¼Œæ ¹æ® state ä¸ props è®¡ç®—å‡ºè¡ç”Ÿå€¼ã€‚</p>
<p>props ä»¥åŠ state çš„å˜åŒ–ä¼šå¯¼è‡´ render å‡½æ•°è°ƒç”¨ï¼Œè¿›è€Œé‡æ–°è®¡ç®—è¡ç”Ÿå€¼ã€‚ä¸ Vue ä¸­çš„å®šä¹‰åŸºæœ¬ä¸€è‡´ã€‚</p>
<pre><code>props/state =&gt; render =&gt; get
</code></pre>
<p>å¯èƒ½æœ‰åŒå­¦ä¼šé—®ä¸ºä»€ä¹ˆä¸ç›´æ¥å®šä¹‰ä¸€ä¸ªæ–¹æ³•è°ƒç”¨å‘¢ï¼Ÿ</p>
<p>å¯¹äº Vue è®¡ç®—å±æ€§ï¼ŒVue å®˜æ–¹æ–‡æ¡£ä¸­å­˜åœ¨è§£é‡Šï¼š&quot;æˆ‘ä»¬å¯ä»¥å°†åŒä¸€å‡½æ•°å®šä¹‰ä¸ºä¸€ä¸ªæ–¹æ³•è€Œä¸æ˜¯ä¸€ä¸ªè®¡ç®—å±æ€§ã€‚ä¸¤ç§æ–¹å¼çš„æœ€ç»ˆç»“æœç¡®å®æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ç„¶è€Œï¼Œä¸åŒçš„æ˜¯è®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„ä¾èµ–è¿›è¡Œç¼“å­˜çš„ã€‚åªåœ¨ç›¸å…³ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚&quot;</p>
<p>å‡ä½¿å­˜åœ¨ä¸¤ä¸ª state å±æ€§ A.Bï¼Œè®¡ç®—å±æ€§åªä¾èµ– Aï¼Œä¸ä¾èµ– Bã€‚å€˜è‹¥ B å˜åŒ–ï¼Œè®¡ç®—å±æ€§ä¸ä¼šé‡æ–°è®¡ç®—ã€‚</p>
<p>ä½†åœ¨ React ä¸­ï¼Œä¾æ—§ä¼šæ‰§è¡Œ renderï¼Œæ‰€ä»¥ get æ²¡æœ‰ç¼“å­˜ï¼Œåªæ˜¯ä¸ªè¯­æ³•ç³–ã€‚</p>
<h2 id="ä½¿ç”¨è®¡ç®—å±æ€§å®ç°æœ€ä¼˜é›…çš„è¡¨å•è”åŠ¨">ä½¿ç”¨è®¡ç®—å±æ€§å®ç°æœ€ä¼˜é›…çš„è¡¨å•è”åŠ¨</h2>
<p>å‡è®¾å­˜åœ¨ä¸šåŠ¡ç±»åˆ«ä»¥åŠå¤„ç½šå†…å®¹ï¼Œå¹¶ä¸”ä¸åŒç±»åˆ«å¯¹åº”ä¸åŒçš„å¤„ç½šå†…å®¹ï¼Œç‚¹å‡»ä¸åŒçš„ä¸šåŠ¡ç±»åˆ«ï¼Œå¤„ç½šå†…å®¹æ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œä»¥ä¸šåŠ¡ç±»åˆ«ä¸ºç½‘ä¸Šè¶…å¸‚ä¸ºä¾‹ï¼Œè§ä¸‹å›¾ï¼š</p>
<figure data-type="image" tabindex="1"><img src="http://ww2.sinaimg.cn/large/006tNc79gy1g5sf8jsdv5j30sa05iwfu.jpg" alt="äº¤äº’.png"></figure>
<p>å®Œæ•´å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼ˆæ•°å­—ä¸ºå¯¹åº” codeï¼‰ï¼š</p>
<pre><code>ä¸šåŠ¡ç±»åˆ«ï¼šç½‘ä¸Šè¶…å¸‚-0
å¤„ç½šå†…å®¹ï¼šåè®®-0 å•†å“-1 åº—é“º-2 æœç´¢-6

ä¸šåŠ¡ç±»åˆ«ï¼šåœ¨çº¿è¯¢ä»·-1
å¤„ç½šå†…å®¹ï¼šè¯¢ä»·å•æŠ¥ä»·-4

ä¸šåŠ¡ç±»åˆ«ï¼šåè®®ä¾›è´§-2
å¤„ç½šå†…å®¹ï¼šåè®®-0 å•†å“-1

ä¸šåŠ¡ç±»åˆ«ï¼šåé¡¹ç«ä»·-4
å¤„ç½šå†…å®¹ï¼šå‘èµ·ç«ä»·-5
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬æ¥å®Œæˆè¿™ä¸ªå°éœ€æ±‚ ğŸ˜ƒ</p>
<h3 id="å‡†å¤‡å·¥ä½œ-æŠ½è±¡å¯¹åº”æ•°æ®ç»“æ„">å‡†å¤‡å·¥ä½œ-æŠ½è±¡å¯¹åº”æ•°æ®ç»“æ„</h3>
<p><em>ä¸ºäº†é¿å…åœ¨ä»£ç ä¸­å‡ºç°æ— æ„ä¹‰çš„ç¥ä»™æ•°å­—</em>ä»¥åŠ<em>å¤§é‡çš„ if-else</em>ï¼Œæˆ‘ä»¬ç»™æ¯ä¸€ä¸ª code å‘½åï¼ŒåŒæ—¶å°†å…¶æ–‡æ¡ˆä»¥åŠå¯¹åº”å†…å®¹è¿›è¡ŒæŠ½è±¡ï¼Œå¦‚ä¸‹ï¼ˆçœ‹ä¸ªå¤§æ¦‚ç»“æ„å°±å¥½ï¼Œæˆ‘ä¹Ÿè§‰å¾—å¤ªé•¿äº†ï¼‰ã€‚</p>
<pre><code class="language-js">/* ä¸šåŠ¡ç±»å‹code */
export const businessTypeCode = {
  LUNATONE_CODE: 0, // ç½‘è¶…
  ENQUIRY_CODE: 1, // åœ¨çº¿è¯¢ä»·
  PROTOCOL_CODE: 2, // åè®®ä¾›è´§
  REVERSE_CODE: 4 // åå‘ç«ä»·
};

/* å¤„ç½šå†…å®¹code */
export const punishContentCode = {
  PROTOCOL_CODE: 0, // åè®®
  ITEM_CODE: 1, // å•†å“
  SHOP_CODE: 2, // åº—é“º
  ENQUIRY_CODE: 4, // è¯¢ä»·å•æŠ¥ä»·
  BIDDING_CODE: 5, // å‘èµ·ç«ä»·
  SEARCH_CODE: 6 // æœç´¢
};

/* ä¸šåŠ¡ç±»å‹ code åŠå…¶å¯¹åº”çš„æè¿° desc ä»¥åŠå¤„ç½šå†…å®¹ code */
export const businessTypeMap = {
  [businessTypeCode.LUNATONE_CODE]: {
    desc: &quot;ç½‘ä¸Šè¶…å¸‚&quot;,
    matchedPunishContent: [
      punishContentCode.PROTOCOL_CODE,
      punishContentCode.ITEM_CODE,
      punishContentCode.SHOP_CODE,
      punishContentCode.SEARCH_CODE
    ]
  },
  [businessTypeCode.ENQUIRY_CODE]: {
    desc: &quot;åœ¨çº¿è¯¢ä»·&quot;,
    matchedPunishContent: [punishContentCode.ENQUIRY_CODE]
  },
  [businessTypeCode.PROTOCOL_CODE]: {
    desc: &quot;åè®®ä¾›è´§&quot;,
    matchedPunishContent: [
      punishContentCode.PROTOCOL_CODE,
      punishContentCode.ITEM_CODE
    ]
  },
  [businessTypeCode.REVERSE_CODE]: {
    desc: &quot;åå‘ç«ä»·&quot;,
    matchedPunishContent: [punishContentCode.BIDDING_CODE]
  }
};
/* å¤„ç½šå†…å®¹ code åŠå…¶å¯¹åº”çš„æè¿° desc */
export const punishContentMap = {
  [punishContentCode.PROTOCOL_CODE]: { desc: &quot;åè®®&quot; },
  [punishContentCode.ITEM_CODE]: { desc: &quot;å•†å“&quot; },
  [punishContentCode.SHOP_CODE]: { desc: &quot;åº—é“º&quot; },
  [punishContentCode.ENQUIRY_CODE]: { desc: &quot;è¯¢ä»·å•æŠ¥ä»·&quot; },
  [punishContentCode.BIDDING_CODE]: { desc: &quot;å‘èµ·ç«ä»·&quot; },
  [punishContentCode.SEARCH_CODE]: { desc: &quot;æœç´¢&quot; }
};
</code></pre>
<h3 id="å·§ç”¨è®¡ç®—å±æ€§">å·§ç”¨è®¡ç®—å±æ€§</h3>
<p>é€šå¸¸ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ç›‘å¬æºè¡¨å•åŸŸ<code>onChange</code>äº‹ä»¶ï¼Œæ”¹å˜ä¸€ä¸ª state å±æ€§ï¼Œç›®æ ‡è¡¨å•åŸŸåˆ™æ ¹æ®è¯¥ state è¿›è¡ŒåŠ¨æ€æ¸²æŸ“ã€‚</p>
<p>è­¬å¦‚åœ¨æ­¤ä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ state ä¸­ç»´æŠ¤ä¸€ä¸ª<code>matchedPunishContent</code>çš„å­—æ®µï¼Œæ¯æ¬¡æ”¹å˜ä¸šåŠ¡ç±»åˆ«æ—¶ï¼Œæ ¹æ®å…¶ code æ‰¾åˆ°åŒ¹é…çš„å¤„ç½šå†…å®¹ï¼Œç„¶å setState ä¿å­˜ï¼Œå–å‡º state æ¸²æŸ“å¤„ç½šå†…å®¹ã€‚</p>
<p>å¤§ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<pre><code>ç²—ç²’åº¦ï¼šui change =&gt; state change =&gt; ui change

ç»†ç²’åº¦ï¼šRadio=&gt; onChange =&gt; å–å¾—codeæ‰¾åˆ°å¯¹åº”å¤„ç½šå†…å®¹ =&gt; setState =&gt; é‡æ–°æ¸²æŸ“å¤„ç½šå†…å®¹
</code></pre>
<p>å¦‚æœè¡¨å•è”åŠ¨å…³ç³»è¾ƒå¤šï¼Œå°±ä¼šç»´æŠ¤å¾ˆå¤šä¸ª state ä»¥åŠ onChange å‡½æ•°ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ¢ä¸€ç§æ€è·¯ï¼Œæ—¢ç„¶ Radio çš„ value å€¼æ”¹å˜äº†ï¼Œé‚£ä¹ˆ getFieldValue å–å¾—å¯¹åº”è¡¨å•åŸŸçš„å€¼ä¹Ÿæ”¹å˜äº†ã€‚</p>
<p>é€šè¿‡å¦‚ä¸‹æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€è®¡ç®—å‡ºå¤„ç½šå†…å®¹ï¼Œè€Œä¸éœ€è¦å»ç»´æŠ¤ä¸€ä¸ªä¸­é—´ state ä»¥åŠä¸€ä¸ª onChange æ–¹æ³•ï¼Œå¤§å¤§å‡å°‘äº†ä»£ç é‡ã€‚</p>
<pre><code class="language-jsx"> /* æ ¹æ® businessType è·å– punishContent */
  get matchedPunishContent() {
    const businessType = this.props.form.getFieldValue('businessType')
    return businessTypeMap[businessType].matchedPunishContent
  }
</code></pre>
<p>å®Œæ•´ä»£ç è§é™„å½•ã€‚</p>
<h2 id="å›å¡«è¡¨å•ä»æœªå¦‚æ­¤ç®€å•">å›å¡«è¡¨å•ï¼Œä»æœªå¦‚æ­¤ç®€å•</h2>
<p>ä½¿ç”¨è®¡ç®—å±æ€§ï¼Œä½ ç”šè‡³å¯ä»¥äº«å—åˆ°å›å¡«è¡¨å•çš„ç¾å¦™ä¹‹å¤„ã€‚</p>
<p>æ¯ä¸€æ¬¡å›å¡«è¡¨å•æ•°æ®ï¼Œæœ€éš¾ç†¬çš„è«è¿‡äºä¸ä½†è¦æŠŠæ•°æ®å¡«ä¸Šå»ï¼Œå¹¶ä¸”éœ€è¦è¿˜åŸè¡¨å•çŠ¶æ€ï¼Œè­¬å¦‚æŸä¸ªè¡¨å•åŸŸæ˜¯é€‰ä¸­çš„è¯ï¼Œä¼šå¯¼è‡´ä¸€ä¸ªè¡¨å•åŸŸ disableï¼Œå¦ä¸€ä¸ªè¡¨å•åŸŸ hide ç­‰ç­‰ï¼Œä¹‹å‰æ˜¯éœ€è¦å»ç»´æŠ¤ ä¸€ä¸ªä¸€ä¸ªçš„ stateï¼Œè€Œæœ‰äº†è®¡ç®—å±æ€§ï¼Œè¿™ä¸€åˆ‡æ“ä½œï¼Œä½ åªéœ€è¦è¿›è¡Œä¸€æ¬¡<code>setFieldsValue</code>ï¼ˆä»¥åŠç¼–å†™ä¸€äº›è®¡ç®—å±æ€§é€»è¾‘ï¼‰ã€‚</p>
<p>ä»¥ä¸Šæ–‡ä¸ºä¾‹ï¼Œå›å¡«æ•°æ®æ—¶ï¼Œå¯¹ä¸šåŠ¡ç±»å‹ï¼ˆbussinessï¼‰è¿›è¡Œ<code>setFieldsValue</code>æ“ä½œï¼ˆä¼šå¯¼è‡´<code>getFieldValue('businessType')</code>çš„æ”¹å˜ï¼‰ï¼Œå¯ä»¥è‡ªåŠ¨è®¡ç®—å‡ºå¤„ç½šå†…å®¹ï¼Œè€Œæ— éœ€æ‰‹åŠ¨å»è¿˜åŸã€‚</p>
<h3 id="å®æˆ˜">å®æˆ˜</h3>
<p>å¦‚å›¾ï¼Œå¦‚æœå‹¾é€‰äº†<code>æ°¸ä¹…</code>(permanent)ï¼Œè¯¥æ—¶é—´é€‰æ‹©å™¨ç¦ç”¨ã€‚</p>
<p>åŒæ—¶ï¼Œå›å¡«æ—¶å¦‚æœ permanent å­—æ®µä¸º PERMANENT_CODEï¼Œåˆ™è¦å°†æ—¶é—´é€‰æ‹©å™¨è¿˜åŸä¸ºç¦ç”¨çŠ¶æ€ã€‚</p>
<figure data-type="image" tabindex="2"><img src="http://ww4.sinaimg.cn/large/006tNc79gy1g5sf8kkxrhj30s402y3yu.jpg" alt="disableDatePicker.png"></figure>
<p>è§£å†³å¦‚ä¸‹ï¼š</p>
<pre><code class="language-jsx">  get isDatePickerDisabled() {
    const { getFieldValue } = this.props.form;
    const permanent = getFieldValue('permanent') || [];
    return permanent.includes(PERMANENT_CODE);
  }
</code></pre>
<p>ä½ åªéœ€è¦è¿™èˆ¬ä½¿ç”¨ï¼š</p>
<pre><code class="language-jsx">&lt;DatePicker disabled={this.isDatePickerDisabled} /&gt;
</code></pre>
<p>ä¸è®ºæ˜¯ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»äº¦æˆ–æ˜¯å¼€å‘è€…å›å¡«è¡¨å•<code>setFieldsValue({permanent:[PERMANENT_CODE]})</code></p>
<p>DatePicker ä¼šè‡ªå·±ä¹–ä¹–ç¦ç”¨ï¼Œè€Œæ— éœ€æ‰‹åŠ¨è¿›è¡Œä»»ä½•æ“ä½œã€‚</p>
<p>æ„Ÿè°¢é˜…è¯»ï¼Œæ¬¢è¿æ¢è®¨ã€‚</p>
<p>å‚è€ƒæ–‡ç« ï¼š</p>
<ol>
<li><a href="https://cn.vuejs.org/v2/guide/computed.html">Vue.js-è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨</a></li>
<li><a href="https://github.com/shimohq/react-cookbook#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">react-cookbook</a></li>
</ol>
<hr>
<p>é™„å½•ï¼š</p>
<pre><code class="language-jsx">import React, { Component } from &quot;react&quot;;
import { Form, Radio } from &quot;doraemon&quot;;
import {
  businessTypeCode,
  punishContentCode,
  businessTypeMap,
  punishContentMap
} from &quot;./config&quot;;

const FormItem = Form.Item;
const RadioGroup = Radio.Group;

@Form.create()
class Test extends Component {
  /* æ ¹æ® businessType åŠ¨æ€è®¡ç®— punishContent */
  get matchedPunishContent() {
    const businessType = this.props.form.getFieldValue(&quot;businessType&quot;);
    return businessTypeMap[businessType].matchedPunishContent;
  }

  /* æ¸²æŸ“ä¸šåŠ¡ç±»åˆ« */
  renderBusinessType = () =&gt; {
    const { getFieldDecorator } = this.props.form;
    const businessTypeConfig = {
      rules: [{ required: true, message: &quot;è¯·é€‰æ‹©ä¸šåŠ¡ç±»åˆ«&quot; }],
      initialValue: businessTypeCode.LUNATONE_CODE
    };
    return (
      &lt;FormItem label=&quot;ä¸šåŠ¡ç±»åˆ«&quot;&gt;
        {getFieldDecorator(&quot;businessType&quot;, businessTypeConfig)(
          &lt;RadioGroup&gt;
            {Object.keys(businessTypeMap).map(value =&gt; {
              const { desc } = businessTypeMap[value];
              return (
                &lt;Radio key={value} value={Number(value)}&gt;
                  {desc}
                &lt;/Radio&gt;
              );
            })}
          &lt;/RadioGroup&gt;
        )}
      &lt;/FormItem&gt;
    );
  };

  /* æ¸²æŸ“å¤„ç½šå†…å®¹ */
  renderPunishContent = () =&gt; {
    const { getFieldDecorator } = this.props.form;
    const punishContentConfig = {
      rules: [{ required: true, message: &quot;è¯·é€‰æ‹©å¤„ç½šå†…å®¹&quot; }],
      initialValue: punishContentCode.PROTOCOL_CODE
    };
    return (
      &lt;FormItem label=&quot;å¤„ç½šå†…å®¹&quot;&gt;
        {getFieldDecorator(&quot;punishContent&quot;, punishContentConfig)(
          &lt;RadioGroup&gt;
            {this.matchedPunishContent.map(value =&gt; {
              const { desc } = punishContentMap[value];
              return (
                &lt;Radio key={value} value={value}&gt;
                  {desc}
                &lt;/Radio&gt;
              );
            })}
          &lt;/RadioGroup&gt;
        )}
      &lt;/FormItem&gt;
    );
  };

  render() {
    return (
      &lt;Form&gt;
        {this.renderBusinessType()}
        {this.renderPunishContent()}
      &lt;/Form&gt;
    );
  }
}
</code></pre>
</div>
                              <div class="mdui-divider mdui-m-t-3"></div>
                              <div class="mdui-row-xs-2 mdui-m-t-2">
  <div class="mdui-col"> <div class="mdui-text-left"><a href="https://worldzhao.github.io/post/write-faster-react-code-with-memoize-one">memoize-one ç®€ä»‹</a></div></div>
 <div class="mdui-col"><div class="mdui-text-right "><a href="https://worldzhao.github.io/post/pig">ä»callbackåˆ°async</a></div> </div>
                                </div>
                                <div class="mdui-divider mdui-m-t-2"></div>
   
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: 'ae70790f8df61d7ce952',
    clientSecret: 'dba663050bbe1ab7a23296198c9728128461dc35',
    repo: 'worldzhao.github.io',
    owner: 'worldzhao',
    admin: ['worldzhao'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

          

          
        
 <script src="https://worldzhao.github.io/media/scripts/Valine.min.js"></script>
 <div class="comment"></div>

<script>
      new Valine({
            el: '.comment',



            path: window.location.pathname,
            pageSize: 30,
            avatar:'mm', 
       })

    </script> 
<script>
    if(window.location.hash){
        var checkExist = setInterval(function() {
           if ($(window.location.hash).length) {
              $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
              clearInterval(checkExist);
           }
        }, 100);
    }
</script>
                         </article>
                 <div class="toc-container mdui-float-right">
                <ul class="markdownIt-TOC">
<li><a href="#%E4%BC%98%E9%9B%85%E5%A4%84%E7%90%86%E8%A1%A8%E5%8D%95%E8%81%94%E5%8A%A8">ä¼˜é›…å¤„ç†è¡¨å•è”åŠ¨</a>
<ul>
<li><a href="#%E5%BC%95%E8%A8%80">å¼•è¨€</a></li>
<li><a href="#%E4%BC%AA%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">ï¼ˆä¼ªï¼‰è®¡ç®—å±æ€§</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E5%AE%9E%E7%8E%B0%E6%9C%80%E4%BC%98%E9%9B%85%E7%9A%84%E8%A1%A8%E5%8D%95%E8%81%94%E5%8A%A8">ä½¿ç”¨è®¡ç®—å±æ€§å®ç°æœ€ä¼˜é›…çš„è¡¨å•è”åŠ¨</a>
<ul>
<li><a href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-%E6%8A%BD%E8%B1%A1%E5%AF%B9%E5%BA%94%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">å‡†å¤‡å·¥ä½œ-æŠ½è±¡å¯¹åº”æ•°æ®ç»“æ„</a></li>
<li><a href="#%E5%B7%A7%E7%94%A8%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7">å·§ç”¨è®¡ç®—å±æ€§</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9E%E5%A1%AB%E8%A1%A8%E5%8D%95%E4%BB%8E%E6%9C%AA%E5%A6%82%E6%AD%A4%E7%AE%80%E5%8D%95">å›å¡«è¡¨å•ï¼Œä»æœªå¦‚æ­¤ç®€å•</a>
<ul>
<li><a href="#%E5%AE%9E%E6%88%98">å®æˆ˜</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>

                        </div>
                 </div>
          
        </div>
        <script data-no-instant>
    (function ($) {
        $.extend({
            adamsOverload: function () {
                $.viewImage({
                    'target'  : '.post-neirong img',
                    'exclude' : '.vsmile-icons img , .song-links-item img',
                    'delay'   : 300
                });
            }
        });
    })(jQuery);
    jQuery.adamsOverload();
</script>
        <footer class="footer mdui-m-t-5 mdui-text-center">
               <nav class="social-links">
                      <ul>
                      
                            
                           
                            
                           
                            	
                        <li class="social-link"><a href="https://github.com/worldzhao" target="_blank"><i class="iconfont icon-github"></i></a></li>
                         
                           
                            	
                        <li class="social-link"><a href="https://www.zhihu.com/people/zhao-qing-90-84/activities" target="_blank"><i class="iconfont icon-zhihu"></i></a></li>
                         
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                            
                           
                      </ul>
                    </nav>
                    <div class="copyright">
                      <p>Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> <br/> Theme <a href="https://github.com/shanbufun/gridea-theme-jia" target="_blank"  title="ä½³"  >Jia</a> by <a href="https://shanbu.fun/" target="_blank"  title="å±±åœæ–¹" >Shanbufun</a> </p>
                  </div>
              </footer>
    </body>
</html>